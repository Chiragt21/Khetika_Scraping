/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/stats/route";
exports.ids = ["app/api/stats/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "?32c4":
/*!****************************!*\
  !*** bufferutil (ignored) ***!
  \****************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?66e9":
/*!********************************!*\
  !*** utf-8-validate (ignored) ***!
  \********************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fstats%2Froute&page=%2Fapi%2Fstats%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstats%2Froute.js&appDir=C%3A%5CUsers%5Cadmin%5Cplaywright-project%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cadmin%5Cplaywright-project&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fstats%2Froute&page=%2Fapi%2Fstats%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstats%2Froute.js&appDir=C%3A%5CUsers%5Cadmin%5Cplaywright-project%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cadmin%5Cplaywright-project&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_admin_playwright_project_app_api_stats_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/stats/route.js */ \"(rsc)/./app/api/stats/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/stats/route\",\n        pathname: \"/api/stats\",\n        filename: \"route\",\n        bundlePath: \"app/api/stats/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\admin\\\\playwright-project\\\\app\\\\api\\\\stats\\\\route.js\",\n    nextConfigOutput,\n    userland: C_Users_admin_playwright_project_app_api_stats_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/stats/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZzdGF0cyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGc3RhdHMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZzdGF0cyUyRnJvdXRlLmpzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNhZG1pbiU1Q3BsYXl3cmlnaHQtcHJvamVjdCU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDYWRtaW4lNUNwbGF5d3JpZ2h0LXByb2plY3QmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ2U7QUFDNUY7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbGF5d3JpZ2h0LXByb2plY3QvPzM2ZjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxcYWRtaW5cXFxccGxheXdyaWdodC1wcm9qZWN0XFxcXGFwcFxcXFxhcGlcXFxcc3RhdHNcXFxccm91dGUuanNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3N0YXRzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvc3RhdHNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3N0YXRzL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiQzpcXFxcVXNlcnNcXFxcYWRtaW5cXFxccGxheXdyaWdodC1wcm9qZWN0XFxcXGFwcFxcXFxhcGlcXFxcc3RhdHNcXFxccm91dGUuanNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3N0YXRzL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fstats%2Froute&page=%2Fapi%2Fstats%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstats%2Froute.js&appDir=C%3A%5CUsers%5Cadmin%5Cplaywright-project%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cadmin%5Cplaywright-project&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/stats/route.js":
/*!********************************!*\
  !*** ./app/api/stats/route.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\n// Initialize Supabase client only if environment variables are available\nconst supabase =  true ? (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(\"https://aczcololiedppabxmsmb.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFjemNvbG9saWVkcHBhYnhtc21iIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTEyNTE0NjcsImV4cCI6MjA2NjgyNzQ2N30.NTlpkbn4PIdHO4xwV0J60ylNDB3RYawJa54LIteCpDo\") : 0;\nconsole.log(\"DEBUG ENV SUPABASE_URL:\", \"https://aczcololiedppabxmsmb.supabase.co\");\nconsole.log(\"DEBUG ENV SUPABASE_ANON_KEY:\",  true ? \"SET\" : 0);\n// Helper function to parse date safely\nfunction parseDate(dateString) {\n    if (!dateString) return null;\n    try {\n        // Handle format like \"30/6/2025, 9:02:32 am\"\n        if (dateString.includes(\"/\") && dateString.includes(\",\")) {\n            const [datePart, timePart] = dateString.split(\", \");\n            const dateParts = datePart.split(\"/\");\n            if (dateParts.length === 3) {\n                const day = parseInt(dateParts[0]);\n                const month = parseInt(dateParts[1]) - 1;\n                const year = parseInt(dateParts[2]);\n                let hours = 0;\n                let minutes = 0;\n                let seconds = 0;\n                if (timePart) {\n                    const timeMatch = timePart.match(/(\\d+):(\\d+):(\\d+)\\s*(am|pm)/i);\n                    if (timeMatch) {\n                        hours = parseInt(timeMatch[1]);\n                        minutes = parseInt(timeMatch[2]);\n                        seconds = parseInt(timeMatch[3]);\n                        const isPM = timeMatch[4].toLowerCase() === \"pm\";\n                        if (isPM && hours !== 12) hours += 12;\n                        if (!isPM && hours === 12) hours = 0;\n                    }\n                }\n                return new Date(year, month, day, hours, minutes, seconds);\n            }\n        }\n        // Try standard parsing\n        return new Date(dateString);\n    } catch (error) {\n        console.error(\"Error parsing date:\", dateString, error);\n        return null;\n    }\n}\nasync function GET() {\n    try {\n        // Check if Supabase is configured\n        if (!supabase) {\n            return Response.json({\n                error: \"Supabase is not configured. Please set environment variables.\"\n            }, {\n                status: 500\n            });\n        }\n        // Get total count of products (more efficient and accurate)\n        const { count: totalProducts, error: countError } = await supabase.from(\"products\").select(\"*\", {\n            count: \"exact\",\n            head: true\n        });\n        if (countError) {\n            return Response.json({\n                error: countError.message\n            }, {\n                status: 500\n            });\n        }\n        // Get unique locations using a more robust approach\n        let allLocations = [];\n        let from = 0;\n        const limit = 1000;\n        while(true){\n            const { data: locationBatch, error: locationError } = await supabase.from(\"products\").select(\"location\").not(\"location\", \"is\", null).not(\"location\", \"eq\", \"\").range(from, from + limit - 1);\n            if (locationError) {\n                return Response.json({\n                    error: locationError.message\n                }, {\n                    status: 500\n                });\n            }\n            if (!locationBatch || locationBatch.length === 0) break;\n            allLocations = allLocations.concat(locationBatch.map((p)=>p.location));\n            from += limit;\n            // Safety check to prevent infinite loop\n            if (from > 10000) break;\n        }\n        // Get unique categories using a more robust approach\n        let allCategories = [];\n        from = 0;\n        while(true){\n            const { data: categoryBatch, error: categoryError } = await supabase.from(\"products\").select(\"category\").not(\"category\", \"is\", null).not(\"category\", \"eq\", \"\").range(from, from + limit - 1);\n            if (categoryError) {\n                return Response.json({\n                    error: categoryError.message\n                }, {\n                    status: 500\n                });\n            }\n            if (!categoryBatch || categoryBatch.length === 0) break;\n            allCategories = allCategories.concat(categoryBatch.map((p)=>p.category));\n            from += limit;\n            // Safety check to prevent infinite loop\n            if (from > 10000) break;\n        }\n        // Get the latest date from all products\n        const { data: latestProduct, error: latestError } = await supabase.from(\"products\").select(\"date\").not(\"date\", \"is\", null).not(\"date\", \"eq\", \"\").order(\"date\", {\n            ascending: false\n        }).limit(1);\n        if (latestError) {\n            return Response.json({\n                error: latestError.message\n            }, {\n                status: 500\n            });\n        }\n        // Get recent products for chart data (limited to 1000 for charts)\n        const { data: products, error: productsError } = await supabase.from(\"products\").select(\"*\").order(\"date\", {\n            ascending: false\n        }).limit(1000);\n        if (productsError) {\n            return Response.json({\n                error: productsError.message\n            }, {\n                status: 500\n            });\n        }\n        // Calculate stats\n        const uniqueLocations = [\n            ...new Set(allLocations)\n        ];\n        const uniqueCategories = [\n            ...new Set(allCategories)\n        ];\n        const lastScrape = latestProduct?.length > 0 ? parseDate(latestProduct[0].date) : null;\n        const stats = {\n            totalProducts: totalProducts || 0,\n            totalLocations: uniqueLocations.length,\n            totalCategories: uniqueCategories.length,\n            lastScrape: lastScrape?.toISOString() || null\n        };\n        // --- Build chart data ---\n        // Products by category\n        const categoryMap = {};\n        products.forEach((p)=>{\n            if (!p.category) return;\n            if (!categoryMap[p.category]) {\n                categoryMap[p.category] = {\n                    name: p.category,\n                    products: 0\n                };\n            }\n            categoryMap[p.category].products += 1;\n        });\n        // Assign colors (cycle through a palette)\n        const palette = [\n            \"#3b82f6\",\n            \"#10b981\",\n            \"#f59e0b\",\n            \"#ef4444\",\n            \"#6366f1\",\n            \"#a21caf\",\n            \"#f472b6\",\n            \"#facc15\"\n        ];\n        const categoryData = Object.values(categoryMap).map((cat, i)=>({\n                ...cat,\n                color: palette[i % palette.length]\n            }));\n        // Product count trend by date\n        const trendMap = {};\n        products.forEach((p)=>{\n            if (!p.date) return;\n            const d = parseDate(p.date);\n            if (!d) return;\n            const dateStr = d.toISOString().slice(0, 10);\n            if (!trendMap[dateStr]) trendMap[dateStr] = 0;\n            trendMap[dateStr] += 1;\n        });\n        const trendData = Object.entries(trendMap).sort(([a], [b])=>a.localeCompare(b)).map(([date, products])=>({\n                date,\n                products\n            }));\n        return Response.json({\n            stats,\n            charts: {\n                categoryData,\n                trendData\n            }\n        });\n    } catch (error) {\n        return Response.json({\n            error: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TTtnQkFBTU47WUFBUztRQUUvQyxPQUFPN0IsU0FBU0MsSUFBSSxDQUFDO1lBQUVtQztZQUFPd0IsUUFBUTtnQkFBRWhCO2dCQUFjVTtZQUFVO1FBQUU7SUFDcEUsRUFBRSxPQUFPeEQsT0FBTztRQUNkLE9BQU9FLFNBQVNDLElBQUksQ0FBQztZQUFFSCxPQUFPQSxNQUFNVyxPQUFPO1FBQUMsR0FBRztZQUFFUCxRQUFRO1FBQUk7SUFDL0Q7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsYXl3cmlnaHQtcHJvamVjdC8uL2FwcC9hcGkvc3RhdHMvcm91dGUuanM/MmUwOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnXHJcblxyXG4vLyBJbml0aWFsaXplIFN1cGFiYXNlIGNsaWVudCBvbmx5IGlmIGVudmlyb25tZW50IHZhcmlhYmxlcyBhcmUgYXZhaWxhYmxlXHJcbmNvbnN0IHN1cGFiYXNlID0gcHJvY2Vzcy5lbnYuU1VQQUJBU0VfVVJMICYmIHByb2Nlc3MuZW52LlNVUEFCQVNFX0FOT05fS0VZIFxyXG4gID8gY3JlYXRlQ2xpZW50KHByb2Nlc3MuZW52LlNVUEFCQVNFX1VSTCwgcHJvY2Vzcy5lbnYuU1VQQUJBU0VfQU5PTl9LRVkpXHJcbiAgOiBudWxsXHJcblxyXG5jb25zb2xlLmxvZygnREVCVUcgRU5WIFNVUEFCQVNFX1VSTDonLCBwcm9jZXNzLmVudi5TVVBBQkFTRV9VUkwpO1xyXG5jb25zb2xlLmxvZygnREVCVUcgRU5WIFNVUEFCQVNFX0FOT05fS0VZOicsIHByb2Nlc3MuZW52LlNVUEFCQVNFX0FOT05fS0VZID8gJ1NFVCcgOiAnTk9UIFNFVCcpO1xyXG5cclxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIHBhcnNlIGRhdGUgc2FmZWx5XHJcbmZ1bmN0aW9uIHBhcnNlRGF0ZShkYXRlU3RyaW5nKSB7XHJcbiAgaWYgKCFkYXRlU3RyaW5nKSByZXR1cm4gbnVsbFxyXG4gIFxyXG4gIHRyeSB7XHJcbiAgICAvLyBIYW5kbGUgZm9ybWF0IGxpa2UgXCIzMC82LzIwMjUsIDk6MDI6MzIgYW1cIlxyXG4gICAgaWYgKGRhdGVTdHJpbmcuaW5jbHVkZXMoJy8nKSAmJiBkYXRlU3RyaW5nLmluY2x1ZGVzKCcsJykpIHtcclxuICAgICAgY29uc3QgW2RhdGVQYXJ0LCB0aW1lUGFydF0gPSBkYXRlU3RyaW5nLnNwbGl0KCcsICcpXHJcbiAgICAgIGNvbnN0IGRhdGVQYXJ0cyA9IGRhdGVQYXJ0LnNwbGl0KCcvJylcclxuICAgICAgaWYgKGRhdGVQYXJ0cy5sZW5ndGggPT09IDMpIHtcclxuICAgICAgICBjb25zdCBkYXkgPSBwYXJzZUludChkYXRlUGFydHNbMF0pXHJcbiAgICAgICAgY29uc3QgbW9udGggPSBwYXJzZUludChkYXRlUGFydHNbMV0pIC0gMVxyXG4gICAgICAgIGNvbnN0IHllYXIgPSBwYXJzZUludChkYXRlUGFydHNbMl0pXHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IGhvdXJzID0gMFxyXG4gICAgICAgIGxldCBtaW51dGVzID0gMFxyXG4gICAgICAgIGxldCBzZWNvbmRzID0gMFxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh0aW1lUGFydCkge1xyXG4gICAgICAgICAgY29uc3QgdGltZU1hdGNoID0gdGltZVBhcnQubWF0Y2goLyhcXGQrKTooXFxkKyk6KFxcZCspXFxzKihhbXxwbSkvaSlcclxuICAgICAgICAgIGlmICh0aW1lTWF0Y2gpIHtcclxuICAgICAgICAgICAgaG91cnMgPSBwYXJzZUludCh0aW1lTWF0Y2hbMV0pXHJcbiAgICAgICAgICAgIG1pbnV0ZXMgPSBwYXJzZUludCh0aW1lTWF0Y2hbMl0pXHJcbiAgICAgICAgICAgIHNlY29uZHMgPSBwYXJzZUludCh0aW1lTWF0Y2hbM10pXHJcbiAgICAgICAgICAgIGNvbnN0IGlzUE0gPSB0aW1lTWF0Y2hbNF0udG9Mb3dlckNhc2UoKSA9PT0gJ3BtJ1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGlzUE0gJiYgaG91cnMgIT09IDEyKSBob3VycyArPSAxMlxyXG4gICAgICAgICAgICBpZiAoIWlzUE0gJiYgaG91cnMgPT09IDEyKSBob3VycyA9IDBcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHllYXIsIG1vbnRoLCBkYXksIGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIFRyeSBzdGFuZGFyZCBwYXJzaW5nXHJcbiAgICByZXR1cm4gbmV3IERhdGUoZGF0ZVN0cmluZylcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgcGFyc2luZyBkYXRlOicsIGRhdGVTdHJpbmcsIGVycm9yKVxyXG4gICAgcmV0dXJuIG51bGxcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQoKSB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIENoZWNrIGlmIFN1cGFiYXNlIGlzIGNvbmZpZ3VyZWRcclxuICAgIGlmICghc3VwYWJhc2UpIHtcclxuICAgICAgcmV0dXJuIFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJTdXBhYmFzZSBpcyBub3QgY29uZmlndXJlZC4gUGxlYXNlIHNldCBlbnZpcm9ubWVudCB2YXJpYWJsZXMuXCIgfSwgeyBzdGF0dXM6IDUwMCB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBHZXQgdG90YWwgY291bnQgb2YgcHJvZHVjdHMgKG1vcmUgZWZmaWNpZW50IGFuZCBhY2N1cmF0ZSlcclxuICAgIGNvbnN0IHsgY291bnQ6IHRvdGFsUHJvZHVjdHMsIGVycm9yOiBjb3VudEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgncHJvZHVjdHMnKVxyXG4gICAgICAuc2VsZWN0KCcqJywgeyBjb3VudDogJ2V4YWN0JywgaGVhZDogdHJ1ZSB9KVxyXG5cclxuICAgIGlmIChjb3VudEVycm9yKSB7XHJcbiAgICAgIHJldHVybiBSZXNwb25zZS5qc29uKHsgZXJyb3I6IGNvdW50RXJyb3IubWVzc2FnZSB9LCB7IHN0YXR1czogNTAwIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEdldCB1bmlxdWUgbG9jYXRpb25zIHVzaW5nIGEgbW9yZSByb2J1c3QgYXBwcm9hY2hcclxuICAgIGxldCBhbGxMb2NhdGlvbnMgPSBbXVxyXG4gICAgbGV0IGZyb20gPSAwXHJcbiAgICBjb25zdCBsaW1pdCA9IDEwMDBcclxuICAgIFxyXG4gICAgd2hpbGUgKHRydWUpIHtcclxuICAgICAgY29uc3QgeyBkYXRhOiBsb2NhdGlvbkJhdGNoLCBlcnJvcjogbG9jYXRpb25FcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAuZnJvbSgncHJvZHVjdHMnKVxyXG4gICAgICAgIC5zZWxlY3QoJ2xvY2F0aW9uJylcclxuICAgICAgICAubm90KCdsb2NhdGlvbicsICdpcycsIG51bGwpXHJcbiAgICAgICAgLm5vdCgnbG9jYXRpb24nLCAnZXEnLCAnJylcclxuICAgICAgICAucmFuZ2UoZnJvbSwgZnJvbSArIGxpbWl0IC0gMSlcclxuICAgICAgXHJcbiAgICAgIGlmIChsb2NhdGlvbkVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIFJlc3BvbnNlLmpzb24oeyBlcnJvcjogbG9jYXRpb25FcnJvci5tZXNzYWdlIH0sIHsgc3RhdHVzOiA1MDAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGlmICghbG9jYXRpb25CYXRjaCB8fCBsb2NhdGlvbkJhdGNoLmxlbmd0aCA9PT0gMCkgYnJlYWtcclxuICAgICAgXHJcbiAgICAgIGFsbExvY2F0aW9ucyA9IGFsbExvY2F0aW9ucy5jb25jYXQobG9jYXRpb25CYXRjaC5tYXAocCA9PiBwLmxvY2F0aW9uKSlcclxuICAgICAgZnJvbSArPSBsaW1pdFxyXG4gICAgICBcclxuICAgICAgLy8gU2FmZXR5IGNoZWNrIHRvIHByZXZlbnQgaW5maW5pdGUgbG9vcFxyXG4gICAgICBpZiAoZnJvbSA+IDEwMDAwKSBicmVha1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEdldCB1bmlxdWUgY2F0ZWdvcmllcyB1c2luZyBhIG1vcmUgcm9idXN0IGFwcHJvYWNoXHJcbiAgICBsZXQgYWxsQ2F0ZWdvcmllcyA9IFtdXHJcbiAgICBmcm9tID0gMFxyXG4gICAgXHJcbiAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICBjb25zdCB7IGRhdGE6IGNhdGVnb3J5QmF0Y2gsIGVycm9yOiBjYXRlZ29yeUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCdwcm9kdWN0cycpXHJcbiAgICAgICAgLnNlbGVjdCgnY2F0ZWdvcnknKVxyXG4gICAgICAgIC5ub3QoJ2NhdGVnb3J5JywgJ2lzJywgbnVsbClcclxuICAgICAgICAubm90KCdjYXRlZ29yeScsICdlcScsICcnKVxyXG4gICAgICAgIC5yYW5nZShmcm9tLCBmcm9tICsgbGltaXQgLSAxKVxyXG4gICAgICBcclxuICAgICAgaWYgKGNhdGVnb3J5RXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gUmVzcG9uc2UuanNvbih7IGVycm9yOiBjYXRlZ29yeUVycm9yLm1lc3NhZ2UgfSwgeyBzdGF0dXM6IDUwMCB9KTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgaWYgKCFjYXRlZ29yeUJhdGNoIHx8IGNhdGVnb3J5QmF0Y2gubGVuZ3RoID09PSAwKSBicmVha1xyXG4gICAgICBcclxuICAgICAgYWxsQ2F0ZWdvcmllcyA9IGFsbENhdGVnb3JpZXMuY29uY2F0KGNhdGVnb3J5QmF0Y2gubWFwKHAgPT4gcC5jYXRlZ29yeSkpXHJcbiAgICAgIGZyb20gKz0gbGltaXRcclxuICAgICAgXHJcbiAgICAgIC8vIFNhZmV0eSBjaGVjayB0byBwcmV2ZW50IGluZmluaXRlIGxvb3BcclxuICAgICAgaWYgKGZyb20gPiAxMDAwMCkgYnJlYWtcclxuICAgIH1cclxuXHJcbiAgICAvLyBHZXQgdGhlIGxhdGVzdCBkYXRlIGZyb20gYWxsIHByb2R1Y3RzXHJcbiAgICBjb25zdCB7IGRhdGE6IGxhdGVzdFByb2R1Y3QsIGVycm9yOiBsYXRlc3RFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ3Byb2R1Y3RzJylcclxuICAgICAgLnNlbGVjdCgnZGF0ZScpXHJcbiAgICAgIC5ub3QoJ2RhdGUnLCAnaXMnLCBudWxsKVxyXG4gICAgICAubm90KCdkYXRlJywgJ2VxJywgJycpXHJcbiAgICAgIC5vcmRlcignZGF0ZScsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KVxyXG4gICAgICAubGltaXQoMSlcclxuXHJcbiAgICBpZiAobGF0ZXN0RXJyb3IpIHtcclxuICAgICAgcmV0dXJuIFJlc3BvbnNlLmpzb24oeyBlcnJvcjogbGF0ZXN0RXJyb3IubWVzc2FnZSB9LCB7IHN0YXR1czogNTAwIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEdldCByZWNlbnQgcHJvZHVjdHMgZm9yIGNoYXJ0IGRhdGEgKGxpbWl0ZWQgdG8gMTAwMCBmb3IgY2hhcnRzKVxyXG4gICAgY29uc3QgeyBkYXRhOiBwcm9kdWN0cywgZXJyb3I6IHByb2R1Y3RzRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdwcm9kdWN0cycpXHJcbiAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAub3JkZXIoJ2RhdGUnLCB7IGFzY2VuZGluZzogZmFsc2UgfSlcclxuICAgICAgLmxpbWl0KDEwMDApXHJcblxyXG4gICAgaWYgKHByb2R1Y3RzRXJyb3IpIHtcclxuICAgICAgcmV0dXJuIFJlc3BvbnNlLmpzb24oeyBlcnJvcjogcHJvZHVjdHNFcnJvci5tZXNzYWdlIH0sIHsgc3RhdHVzOiA1MDAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2FsY3VsYXRlIHN0YXRzXHJcbiAgICBjb25zdCB1bmlxdWVMb2NhdGlvbnMgPSBbLi4ubmV3IFNldChhbGxMb2NhdGlvbnMpXVxyXG4gICAgY29uc3QgdW5pcXVlQ2F0ZWdvcmllcyA9IFsuLi5uZXcgU2V0KGFsbENhdGVnb3JpZXMpXVxyXG4gICAgY29uc3QgbGFzdFNjcmFwZSA9IGxhdGVzdFByb2R1Y3Q/Lmxlbmd0aCA+IDAgPyBwYXJzZURhdGUobGF0ZXN0UHJvZHVjdFswXS5kYXRlKSA6IG51bGxcclxuXHJcbiAgICBjb25zdCBzdGF0cyA9IHtcclxuICAgICAgdG90YWxQcm9kdWN0czogdG90YWxQcm9kdWN0cyB8fCAwLFxyXG4gICAgICB0b3RhbExvY2F0aW9uczogdW5pcXVlTG9jYXRpb25zLmxlbmd0aCxcclxuICAgICAgdG90YWxDYXRlZ29yaWVzOiB1bmlxdWVDYXRlZ29yaWVzLmxlbmd0aCxcclxuICAgICAgbGFzdFNjcmFwZTogbGFzdFNjcmFwZT8udG9JU09TdHJpbmcoKSB8fCBudWxsXHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tIEJ1aWxkIGNoYXJ0IGRhdGEgLS0tXHJcbiAgICAvLyBQcm9kdWN0cyBieSBjYXRlZ29yeVxyXG4gICAgY29uc3QgY2F0ZWdvcnlNYXAgPSB7fVxyXG4gICAgcHJvZHVjdHMuZm9yRWFjaCgocCkgPT4ge1xyXG4gICAgICBpZiAoIXAuY2F0ZWdvcnkpIHJldHVyblxyXG4gICAgICBpZiAoIWNhdGVnb3J5TWFwW3AuY2F0ZWdvcnldKSB7XHJcbiAgICAgICAgY2F0ZWdvcnlNYXBbcC5jYXRlZ29yeV0gPSB7IG5hbWU6IHAuY2F0ZWdvcnksIHByb2R1Y3RzOiAwIH1cclxuICAgICAgfVxyXG4gICAgICBjYXRlZ29yeU1hcFtwLmNhdGVnb3J5XS5wcm9kdWN0cyArPSAxXHJcbiAgICB9KVxyXG4gICAgLy8gQXNzaWduIGNvbG9ycyAoY3ljbGUgdGhyb3VnaCBhIHBhbGV0dGUpXHJcbiAgICBjb25zdCBwYWxldHRlID0gWycjM2I4MmY2JywgJyMxMGI5ODEnLCAnI2Y1OWUwYicsICcjZWY0NDQ0JywgJyM2MzY2ZjEnLCAnI2EyMWNhZicsICcjZjQ3MmI2JywgJyNmYWNjMTUnXVxyXG4gICAgY29uc3QgY2F0ZWdvcnlEYXRhID0gT2JqZWN0LnZhbHVlcyhjYXRlZ29yeU1hcCkubWFwKChjYXQsIGkpID0+ICh7IC4uLmNhdCwgY29sb3I6IHBhbGV0dGVbaSAlIHBhbGV0dGUubGVuZ3RoXSB9KSlcclxuXHJcbiAgICAvLyBQcm9kdWN0IGNvdW50IHRyZW5kIGJ5IGRhdGVcclxuICAgIGNvbnN0IHRyZW5kTWFwID0ge31cclxuICAgIHByb2R1Y3RzLmZvckVhY2goKHApID0+IHtcclxuICAgICAgaWYgKCFwLmRhdGUpIHJldHVyblxyXG4gICAgICBjb25zdCBkID0gcGFyc2VEYXRlKHAuZGF0ZSlcclxuICAgICAgaWYgKCFkKSByZXR1cm5cclxuICAgICAgY29uc3QgZGF0ZVN0ciA9IGQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMClcclxuICAgICAgaWYgKCF0cmVuZE1hcFtkYXRlU3RyXSkgdHJlbmRNYXBbZGF0ZVN0cl0gPSAwXHJcbiAgICAgIHRyZW5kTWFwW2RhdGVTdHJdICs9IDFcclxuICAgIH0pXHJcbiAgICBjb25zdCB0cmVuZERhdGEgPSBPYmplY3QuZW50cmllcyh0cmVuZE1hcClcclxuICAgICAgLnNvcnQoKFthXSwgW2JdKSA9PiBhLmxvY2FsZUNvbXBhcmUoYikpXHJcbiAgICAgIC5tYXAoKFtkYXRlLCBwcm9kdWN0c10pID0+ICh7IGRhdGUsIHByb2R1Y3RzIH0pKVxyXG5cclxuICAgIHJldHVybiBSZXNwb25zZS5qc29uKHsgc3RhdHMsIGNoYXJ0czogeyBjYXRlZ29yeURhdGEsIHRyZW5kRGF0YSB9IH0pXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHJldHVybiBSZXNwb25zZS5qc29uKHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSwgeyBzdGF0dXM6IDUwMCB9KTtcclxuICB9XHJcbn0gIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsInN1cGFiYXNlIiwicHJvY2VzcyIsImVudiIsIlNVUEFCQVNFX1VSTCIsIlNVUEFCQVNFX0FOT05fS0VZIiwiY29uc29sZSIsImxvZyIsInBhcnNlRGF0ZSIsImRhdGVTdHJpbmciLCJpbmNsdWRlcyIsImRhdGVQYXJ0IiwidGltZVBhcnQiLCJzcGxpdCIsImRhdGVQYXJ0cyIsImxlbmd0aCIsImRheSIsInBhcnNlSW50IiwibW9udGgiLCJ5ZWFyIiwiaG91cnMiLCJtaW51dGVzIiwic2Vjb25kcyIsInRpbWVNYXRjaCIsIm1hdGNoIiwiaXNQTSIsInRvTG93ZXJDYXNlIiwiRGF0ZSIsImVycm9yIiwiR0VUIiwiUmVzcG9uc2UiLCJqc29uIiwic3RhdHVzIiwiY291bnQiLCJ0b3RhbFByb2R1Y3RzIiwiY291bnRFcnJvciIsImZyb20iLCJzZWxlY3QiLCJoZWFkIiwibWVzc2FnZSIsImFsbExvY2F0aW9ucyIsImxpbWl0IiwiZGF0YSIsImxvY2F0aW9uQmF0Y2giLCJsb2NhdGlvbkVycm9yIiwibm90IiwicmFuZ2UiLCJjb25jYXQiLCJtYXAiLCJwIiwibG9jYXRpb24iLCJhbGxDYXRlZ29yaWVzIiwiY2F0ZWdvcnlCYXRjaCIsImNhdGVnb3J5RXJyb3IiLCJjYXRlZ29yeSIsImxhdGVzdFByb2R1Y3QiLCJsYXRlc3RFcnJvciIsIm9yZGVyIiwiYXNjZW5kaW5nIiwicHJvZHVjdHMiLCJwcm9kdWN0c0Vycm9yIiwidW5pcXVlTG9jYXRpb25zIiwiU2V0IiwidW5pcXVlQ2F0ZWdvcmllcyIsImxhc3RTY3JhcGUiLCJkYXRlIiwic3RhdHMiLCJ0b3RhbExvY2F0aW9ucyIsInRvdGFsQ2F0ZWdvcmllcyIsInRvSVNPU3RyaW5nIiwiY2F0ZWdvcnlNYXAiLCJmb3JFYWNoIiwibmFtZSIsInBhbGV0dGUiLCJjYXRlZ29yeURhdGEiLCJPYmplY3QiLCJ2YWx1ZXMiLCJjYXQiLCJpIiwiY29sb3IiLCJ0cmVuZE1hcCIsImQiLCJkYXRlU3RyIiwic2xpY2UiLCJ0cmVuZERhdGEiLCJlbnRyaWVzIiwic29ydCIsImEiLCJiIiwibG9jYWxlQ29tcGFyZSIsImNoYXJ0cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/stats/route.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/ws","vendor-chunks/whatwg-url","vendor-chunks/webidl-conversions","vendor-chunks/isows"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fstats%2Froute&page=%2Fapi%2Fstats%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstats%2Froute.js&appDir=C%3A%5CUsers%5Cadmin%5Cplaywright-project%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cadmin%5Cplaywright-project&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();